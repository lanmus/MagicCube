# 百变魔方项目开发指南

## 1. 项目概述

### 1.1 基本信息
- 项目名称：百变魔方
- 设计风格：参考 OpenAI 官网，追求干净、整洁、高级的视觉效果
- 技术栈：Express.js + Vue.js + Bootstrap

### 1.2 核心功能
- 商品上传管理
- 商品展示与搜索
- 素材预览与下载

## 2. 数据流转关系

### 2.1 核心数据流
```mermaid
graph LR
    A[用户A - 上传] --> B[数据库存储]
    B --> C[用户B - 浏览/搜索]
    C --> D[商品详情页]
    D --> E[素材下载]
```

### 2.2 数据交互逻辑
1. 上传流程：用户A上传商品信息和素材
2. 存储流程：数据进入数据库，素材存储到文件系统
3. 展示流程：用户B通过列表/搜索访问
4. 下载流程：用户选择素材后打包下载

## 3. 功能模块详细说明

### 3.1 商品上传功能

#### 基础信息
- 商品名称（必填）
- SPU型号（必填，唯一）
- 人群性别（单选：男装/女装/中性）
- 年龄区间（单选：成人/青少年/儿童）
- 应用场景（多选）
- 场景风格（多选）
- 设计师信息（3D设计师、平面设计师）

#### 素材模块结构
1. 主图模块
   - 向往场景主图（最多20张）
   - 核心卖点罗列（最多20张）
   - 核心卖点展示（最多20张）
   - 核心卖点举证（最多20张）
   - 次要卖点展示（最多20张）

2. SKU模块
   - SKU-1（最多20张）
   - SKU-2（最多20张）
   - SKU-3（最多20张）
   - 要求：自动显示SKU名称（从图片名获取）

3. 详情模块
   - 信任背书（最多20张）
   - 向往场景海报（最多20张）
   - 核心卖点罗列（最多20张）
   - 小红书博主推荐（最多20张）
   - 核心卖点A-E含举证（每项最多20张）
   - 其他卖点展示（最多20张）
   - 参数信息展示（最多20张）

#### 上传功能要求
- 批量上传支持
- 进度条显示
- 模块管理（增加/删除/重命名）
- 实时预览
- 错误处理和提示

#### 文件上传优化
- 文件预处理
  - 图片压缩和格式转换
  - 图片尺寸标准化
  - EXIF信息清理
  - 水印处理
- 上传优化
  - 分片上传
  - 断点续传
  - MD5校验
  - 秒传功能
- 上传限制
  - 文件大小限制（单文件/总量）
  - 文件类型限制
  - 文件命名规范
  - 上传频率限制

### 3.2 首页功能

#### 商品列表
- 展示内容：
  - 商品预览图
  - 商品名称
  - 简短描述
  - 操作按钮（查看/编辑/删除）
- 分页功能
- 条件筛选

#### 搜索功能
- 多条件组合搜索
- 支持模糊匹配
- 实时搜索提示
- 搜索历史记录

### 3.3 商品详情页

#### 布局结构
- 左侧：大图预览区
- 右侧：缩略图列表（6张）
- 模块导航栏

#### 交互逻辑
1. 默认显示第一个子模块的第一张图
2. 支持上一步/下一步导航
3. 每个子模块限选一张图
4. 轮播式浏览所有子模块

#### 下载功能
- 预览淘宝详情页
- 素材打包下载
  - 主文件夹：SPU号
  - 子文件夹：模块名称
  - 保持原始图片名称

### 3.4 数据统计与分析

#### 使用统计
- 上传统计
  - 每日上传量
  - 文件大小分布
  - 上传成功率
- 下载统计
  - 热门商品
  - 下载量趋势
  - 用户活跃度

#### 性能监控
- 接口响应时间
- 资源使用情况
- 错误率统计
- 用户行为分析

### 3.5 批量处理功能

#### 批量上传
- 文件夹上传
- 批量重命名
- 批量分类
- 导入导出

#### 批量编辑
- 批量修改属性
- 批量移动
- 批量删除
- 批量导出

### 3.6 版本控制

#### 素材版本
- 历史版本记录
- 版本回滚
- 版本对比
- 变更说明

#### 审核流程
- 素材审核
- 修改审核
- 删除审核
- 审核日志

## 4. 技术实现注意事项

### 4.1 前端实现
- 使用Vue.js组件化开发
- 实现响应式布局
- 优化图片加载性能
- 实现平滑的过渡动画

### 4.2 后端实现
- 实现高效的文件存储系统
- 优化图片处理性能
- 实现并发上传处理
- 确保数据一致性

### 4.3 安全考虑
- 文件类型验证
- 文件大小限制
- 用户权限控制
- 防止恶意上传

### 4.4 缓存策略
- 前端缓存
  - LocalStorage缓存用户偏好
  - SessionStorage缓存临时数据
  - IndexedDB缓存大量数据
  - Service Worker缓存静态资源
- 后端缓存
  - Redis缓存热点数据
    - 商品基础信息
    - 搜索结果
    - 用户会话
  - CDN缓存
    - 图片资源
    - 静态文件
- 缓存更新策略
  - 定时更新
  - 主动失效
  - 版本控制

## 5. 开发规范

### 5.1 代码规范
- 遵循ESLint规则
- 使用TypeScript类型检查
- 编写单元测试
- 代码审查流程

### 5.2 文件命名规范
- 组件名：PascalCase
- 文件名：kebab-case
- 变量名：camelCase
- 常量名：UPPER_CASE

### 5.3 注释规范
- 组件注释
- 函数注释
- 关键逻辑注释
- TODO标记规范 